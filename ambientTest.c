#pragma config(Sensor, S1,     sensorColorMid, sensorEV3_Color)
#pragma config(Sensor, S2,     sensorColorRight, sensorEV3_Color, modeEV3Color_Color)
#pragma config(Sensor, S4,     sensorColorLeft, sensorEV3_Color, modeEV3Color_Color)
#pragma config(Motor,  motorA,          left,          tmotorEV3_Large, PIDControl, encoder)
#pragma config(Motor,  motorB,          right,         tmotorEV3_Large, PIDControl, encoder)
//*!!Code automatically generated by 'ROBOTC' configuration wizard               !!*//



task main()
{
	TLegoColors lastLeftColor;
	TLegoColors lastRightColor;

	bool run = true;
	while (run)
	{
		TLegoColors colorLeft = getColorName(sensorColorLeft);

		TLegoColors colorRight = getColorName(sensorColorRight);

		if (colorLeft == colorWhite
			&& colorRight == colorWhite)
		{
			// drive straight
			displayTextLine(3, "2Weiﬂ");
			setMotorSync(left, right, 0, 30);

		}
		else if(colorLeft == colorGreen)
		{
			displayTextLine(2,"Green");
			setMotorSync(left, right, 50, 30);
		}
		else if(colorLeft == colorBlack
			&&colorRight == colorBlack)
		{
			displayTextLine(3, "2Black");
			if(lastRightColor == colorBlack && lastLeftColor != colorBlack)
			{
				setMotorSync(left, right, 100, 10);
			}
			else if( lastRightColor != colorBlack && lastLeftColor == colorBlack)
			{
				setMotorSync(left, right, -100, 10);
			}
			else{
				setMotorSync(left,right,0,30);
			}

		}
		else if (colorLeft == colorBlack)
		{
			// turn right
			displayTextLine(3, "LeftBlack");
			setMotorSync(left, right, -100, 10);
		}
		else if (colorRight == colorBlack)
		{
			// turn left<<<<<<<<<<<<<<<<<<<y<
			displayTextLine(3, "RightBlack");
			setMotorSync(left, right, 100, 10);
		}

		lastLeftColor = colorLeft;
		lastRightColor = colorRight;

	}


}
